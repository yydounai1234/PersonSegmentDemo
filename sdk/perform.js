function a0_0x1ffc(_0x5786b2,_0xad7b13){const _0x18281a=a0_0x1828();return a0_0x1ffc=function(_0x1ffcef,_0x5a3b2b){_0x1ffcef=_0x1ffcef-0x123;let _0x33e478=_0x18281a[_0x1ffcef];return _0x33e478;},a0_0x1ffc(_0x5786b2,_0xad7b13);}function a0_0x1828(){const _0x42a14e=['resolve','rawCtx','stop','postMessage','performBlur','rawCanvas','2283630aoBbIl','performBgImg','drawImage','log','stream','getTracks','bagayalu','16GqWedO','getRandomValues','substr','join','11XsuVJB','toString','isDrawing','76764ZCTPxL','messageTask','getImageData','877896OuOoUA','createElement','getTime','then','shouldStop','240rAgNcX','138965ExjFXz','width','randomStringGen','audioElement','drawfxJsData','onmessage','srcObject','getContext','28QbFIVU','loadModel','377IbhQND','2105852NNWEdD','500936BtlmsD','videoElement','height','1323744VJFQjD','27fFCekr','drawImageData','getUserMedia','dec2hex','canvas'];a0_0x1828=function(){return _0x42a14e;};return a0_0x1828();}const a0_0x4abde9=a0_0x1ffc;(function(_0x45a022,_0x2243d3){const _0x5e6691=a0_0x1ffc,_0x3761b0=_0x45a022();while(!![]){try{const _0x3228fa=-parseInt(_0x5e6691(0x132))/0x1*(parseInt(_0x5e6691(0x143))/0x2)+parseInt(_0x5e6691(0x14b))/0x3*(-parseInt(_0x5e6691(0x147))/0x4)+-parseInt(_0x5e6691(0x13b))/0x5*(parseInt(_0x5e6691(0x13a))/0x6)+-parseInt(_0x5e6691(0x146))/0x7*(-parseInt(_0x5e6691(0x12b))/0x8)+-parseInt(_0x5e6691(0x135))/0x9+-parseInt(_0x5e6691(0x124))/0xa*(-parseInt(_0x5e6691(0x12f))/0xb)+parseInt(_0x5e6691(0x14a))/0xc*(parseInt(_0x5e6691(0x145))/0xd);if(_0x3228fa===_0x2243d3)break;else _0x3761b0['push'](_0x3761b0['shift']());}catch(_0x8c61de){_0x3761b0['push'](_0x3761b0['shift']());}}}(a0_0x1828,0x96e21));import a0_0x10f1f6 from'./perform.worker.js';import a0_0x2f31f2 from'./perform-filter';const webWorker=new a0_0x10f1f6();class QNPersonSegmentModel{constructor(){const _0x44ba7a=a0_0x1ffc;this['shouldStop']=![],this[_0x44ba7a(0x148)]=null,this[_0x44ba7a(0x133)]={},this['rawCanvas']=null,this['rawCtx']=null,this[_0x44ba7a(0x128)]=null,this[_0x44ba7a(0x13e)]=null,this[_0x44ba7a(0x131)]=![],webWorker[_0x44ba7a(0x140)]=_0x5d590a=>{const _0x5c6282=_0x44ba7a,{id:_0x59c2a0,data:_0x1e8745}=_0x5d590a['data'];this[_0x5c6282(0x133)][_0x59c2a0]&&(this[_0x5c6282(0x133)][_0x59c2a0][_0x5c6282(0x150)](_0x1e8745),delete this[_0x5c6282(0x133)][_0x59c2a0]);};}[a0_0x4abde9(0x153)](_0x2fe96e,_0x268d92){const _0x5c289c=a0_0x4abde9,_0x42e439=this[_0x5c289c(0x13d)]();return new Promise((_0x209c2c,_0x4e65d3)=>{const _0x1c7b8d=_0x5c289c;webWorker[_0x1c7b8d(0x153)]({'action':_0x2fe96e,'data':_0x268d92,'id':_0x42e439}),this['messageTask'][_0x42e439]={'resolve':_0x209c2c,'reject':_0x4e65d3};});}['dec2hex'](_0x20bf81){const _0x5bb849=a0_0x4abde9;return('0'+_0x20bf81[_0x5bb849(0x130)](0x10))[_0x5bb849(0x12d)](-0x2);}['randomStringGen'](){const _0x471487=a0_0x4abde9,_0x1aa162=new Uint8Array((0x10||0x28)/0x2);return window['crypto'][_0x471487(0x12c)](_0x1aa162),Array['from'](_0x1aa162,this[_0x471487(0x14e)])[_0x471487(0x12e)]('');}async[a0_0x4abde9(0x144)](_0x143f4b,_0x335501={'downsample_ratio':0.5}){const _0x2d6d42=a0_0x4abde9;return this[_0x2d6d42(0x148)]=_0x143f4b,await this[_0x2d6d42(0x153)]('init',{'height':_0x143f4b['height'],'width':_0x143f4b[_0x2d6d42(0x13c)],'config':_0x335501});}async['drawImageData'](_0x47b222,_0x5bac96,_0x23b46b){const _0x318e19=a0_0x4abde9;if(this[_0x318e19(0x139)])return![];this[_0x318e19(0x151)][_0x318e19(0x126)](_0x5bac96,0x0,0x0,this[_0x318e19(0x123)][_0x318e19(0x13c)],this['rawCanvas'][_0x318e19(0x149)]);const _0x1825ca=this[_0x318e19(0x151)][_0x318e19(0x134)](0x0,0x0,this[_0x318e19(0x123)][_0x318e19(0x13c)],this['rawCanvas']['height']);let _0x1a5c61=new Date()[_0x318e19(0x137)]();const _0xb3c24a=await this['postMessage']('perform',{'imageData':_0x1825ca,'bgImgData':_0x23b46b});let _0x4dc842=new Date()[_0x318e19(0x137)]();const _0x1caf8a=_0x47b222[_0x318e19(0x142)]('2d'),_0x13ad8b=await createImageBitmap(_0x23b46b);_0x1caf8a['drawImage'](_0x13ad8b,0x0,0x0);const _0xd3fd47=await createImageBitmap(_0xb3c24a);_0x1caf8a[_0x318e19(0x126)](_0xd3fd47,0x0,0x0);}async['drawBlurData'](_0x523ef7,_0x13ca7d,_0x282361){const _0x14c1a1=a0_0x4abde9;if(this['shouldStop'])return![];this[_0x14c1a1(0x151)][_0x14c1a1(0x126)](_0x13ca7d,0x0,0x0,this[_0x14c1a1(0x123)][_0x14c1a1(0x13c)],this[_0x14c1a1(0x123)][_0x14c1a1(0x149)]);const _0x10eca9=this[_0x14c1a1(0x151)]['getImageData'](0x0,0x0,this[_0x14c1a1(0x123)][_0x14c1a1(0x13c)],this[_0x14c1a1(0x123)][_0x14c1a1(0x149)]);let _0x470d47=new Date()['getTime']();const _0x444f5e=await this['postMessage']('perform',{'imageData':_0x10eca9});let _0x515a0e=new Date()[_0x14c1a1(0x137)]();const _0x59e492=_0x523ef7['getContext']('2d'),_0x4c1d77=drawfxJsData(_0x444f5e,_0x282361),_0x54d820=await createImageBitmap(_0x4c1d77);_0x59e492[_0x14c1a1(0x126)](_0x54d820,0x0,0x0);const _0x13b6d4=await createImageBitmap(_0x444f5e);_0x59e492[_0x14c1a1(0x126)](_0x13b6d4,0x0,0x0);}[a0_0x4abde9(0x13f)](_0x7aeeed,_0x26bf6c){const _0x2c455a=a0_0x4abde9;console[_0x2c455a(0x127)](_0x2c455a(0x12a),_0x7aeeed,_0x26bf6c);}async[a0_0x4abde9(0x125)](_0x94f82,_0x20033f,_0x1f14bd={'video':!![]}){const _0x22d8e9=a0_0x4abde9;this[_0x22d8e9(0x139)]=![],this['rawCanvas']=document[_0x22d8e9(0x136)](_0x22d8e9(0x14f)),this[_0x22d8e9(0x123)][_0x22d8e9(0x149)]=_0x94f82[_0x22d8e9(0x149)],this[_0x22d8e9(0x123)][_0x22d8e9(0x13c)]=_0x94f82[_0x22d8e9(0x13c)],this[_0x22d8e9(0x151)]=this[_0x22d8e9(0x123)][_0x22d8e9(0x142)]('2d'),navigator['mediaDevices'][_0x22d8e9(0x14d)](_0x1f14bd)[_0x22d8e9(0x138)](async _0xdef97b=>{const _0x27a38c=_0x22d8e9;this['stream']=_0xdef97b,this[_0x27a38c(0x148)]['srcObject']=_0xdef97b;while(this[_0x27a38c(0x139)]===![]){await this[_0x27a38c(0x14c)](_0x94f82,this[_0x27a38c(0x148)],_0x20033f);}});}async[a0_0x4abde9(0x154)](_0x569cfb,_0x174c6e,_0x364ba5={'video':!![]}){const _0x3b2660=a0_0x4abde9;this[_0x3b2660(0x139)]=![],this[_0x3b2660(0x123)]=document[_0x3b2660(0x136)](_0x3b2660(0x14f)),this[_0x3b2660(0x123)][_0x3b2660(0x149)]=_0x569cfb[_0x3b2660(0x149)],this[_0x3b2660(0x123)][_0x3b2660(0x13c)]=_0x569cfb[_0x3b2660(0x13c)],this[_0x3b2660(0x151)]=this['rawCanvas']['getContext']('2d'),navigator['mediaDevices'][_0x3b2660(0x14d)](_0x364ba5)[_0x3b2660(0x138)](async _0x1f058a=>{const _0x529159=_0x3b2660;this[_0x529159(0x128)]=_0x1f058a,this[_0x529159(0x148)][_0x529159(0x141)]=_0x1f058a;while(this[_0x529159(0x139)]===![]){await this['drawBlurData'](_0x569cfb,this[_0x529159(0x148)],_0x174c6e);}});}[a0_0x4abde9(0x152)](){const _0x1eee37=a0_0x4abde9;this['shouldStop']=!![];if(this['stream']){const _0xae8c04=this[_0x1eee37(0x128)][_0x1eee37(0x129)]();for(let _0x31d64d of _0xae8c04){_0x31d64d[_0x1eee37(0x152)]();}}}}export const qnPersonSegmentModel=new QNPersonSegmentModel();